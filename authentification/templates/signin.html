{% load socialaccount %}
<div class="modal-right">
    <h3 class="form-title">Sign in to your account</h3>
    <p class="form-subtitle">Don't have an account? <a href="#">Join here</a></p>
    
    <form>
      <div class="form-group">
        <label class="form-label" for="email">Email address</label>
        <input type="email" id="email" class="form-input" placeholder="your@email.com" required>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="password">Password</label>
        <input type="password" id="password" class="form-input" placeholder="••••••••" required>
      </div>
      
      <div class="form-actions">
        <label class="remember-me">
          <input type="checkbox"> Remember me
        </label>
        <a href="{% url 'account_reset_password' %}" class="forgot-password">Forgot password?</a>
      </div>
      
      <button type="submit" class="signin-btn">Sign in</button>
    </form>
    
    <div class="divider">or</div>
    
    <div class="social-signin">
        <a href="{% provider_login_url 'google' %}" class="btn btn-google" id="google">
      <button class="social-btn">
        
        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v4/icons/google.svg" alt="Google">
        Google
      </button>
    </a>
      <button class="social-btn">
        <img src="https://cdn.jsdelivr.net/npm/simple-icons@v4/icons/facebook.svg" alt="Facebook">
        Facebook
      </button>
    </div>
    
    <p class="terms">
      By signing in, you agree to the Bricole <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a>.
    </p>
  </div>

  <script>
    document.getElementById("google").addEventListener("click", (e) => {
      e.preventDefault();
      let url = document.getElementById('google').href;
      const parentOrigin = encodeURIComponent(window.location.origin);
    const separator = url.includes('?') ? '&' : '?';
    url += `${separator}parent_origin=${parentOrigin}`;
      const screenLeft = window.screenLeft || window.screenX;
      const screenTop = window.screenTop || window.screenY;
      const screenWidth = window.innerWidth || document.documentElement.clientWidth;
      const screenHeight = window.innerHeight || document.documentElement.clientHeight;
      const left = screenLeft + (screenWidth - 600) / 2;
      const top = screenTop + (screenHeight - 600) / 2;
      const features = `width=600,height=600,left=${left},top=${top},resizable=yes,scrollbars=yes`;
      
      const popup = window.open(url, "mehdi", features); // ✅ Use 'popup' not 'tab'
      
      const channel = new BroadcastChannel('my-channel');
channel.addEventListener('message', event => {
    console.log('Received:', event.data);
    if(event.data.type="hello"){
      window.location.reload()
    }
});

  });
  </script>